@if (show) {
  <section class="rounded-[40px] bg-white/90 p-10 shadow-[0_40px_90px_rgba(15,23,42,0.18)] ring-1 ring-slate-100 backdrop-blur-xl dark:bg-slate-900/90 dark:ring-slate-800">
    <div class="flex flex-col gap-8">
      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div>
          <p class="text-xs uppercase tracking-[0.3em] text-rose-400">Alerta activa</p>
          <h2 class="text-3xl font-semibold tracking-tight">Respuesta inmediata</h2>
        </div>
      </div>

      <div class="grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,2fr)] lg:items-start">
        <div class="grid gap-6">
          <div class="rounded-3xl bg-rose-50/70 p-6 text-slate-900 dark:bg-rose-500/10 dark:text-slate-100">
            <div class="flex items-start justify-between gap-4">
              <div>
                <p class="text-xs uppercase tracking-[0.2em] text-rose-400">Tipo</p>
                <p class="mt-3 text-2xl font-semibold">{{ alert.nombre }}</p>
                <div class="mt-2 flex flex-wrap items-center gap-2 text-sm text-rose-500 dark:text-rose-200">
                  @if (alert.nivel_alerta) {
                    <span class="rounded-full bg-rose-100 px-3 py-1 text-xs font-semibold text-rose-600 dark:bg-rose-500/20 dark:text-rose-200">
                      {{ alert.nivel_alerta }}
                    </span>
                  }
                  <span>Prioridad {{ alert.prioridad }}</span>
                </div>
              </div>
              @if (alert.imagen) {
                <img
                  class="h-28 w-28 shrink-0 rounded-2xl object-cover shadow-sm md:h-32 md:w-32"
                  [src]="alert.imagen"
                  [alt]="alert.nombre"
                />
              }
            </div>
            @if (alert.descripcion) {
              <p class="mt-4 text-sm text-rose-600/80 dark:text-rose-200/80">{{ alert.descripcion }}</p>
            }
          </div>
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Ubicacion</p>
            <p class="mt-3 text-lg font-semibold">
              {{ alert.ubicacion.direccion || alert.ubicacion.nombre }}
            </p>
            @if (alert.ubicacion.nombre) {
              <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">
                Sede {{ alert.ubicacion.nombre }}
              </p>
            }
            @if (alert.ubicacion.maps) {
              <a
                class="mt-3 inline-flex items-center text-sm font-semibold text-slate-700 underline decoration-slate-300 underline-offset-4 dark:text-slate-200 dark:decoration-slate-500"
                [href]="alert.ubicacion.maps"
                target="_blank"
                rel="noopener"
              >
                Abrir mapa
              </a>
            }
          </div>
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Origen</p>
            <p class="mt-3 text-lg font-semibold">
              {{ alert.origen.nombre || 'Sin origen' }}
            </p>
            @if (alert.origen.tipo) {
              <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">{{ alert.origen.tipo }}</p>
            }
          </div>
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Checklist</p>
            <div class="mt-3 flex flex-wrap gap-2">
              @if (alert.elementos_necesarios.length === 0) {
                <span class="text-sm text-slate-400">Sin elementos</span>
              } @else {
                @for (item of alert.elementos_necesarios; track $index) {
                  <span class="rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm dark:bg-slate-900 dark:text-slate-200">
                    {{ item }}
                  </span>
                }
              }
            </div>
          </div>
        </div>

        <div class="grid gap-6">
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Mapa</p>
            <div class="mt-4 overflow-hidden rounded-2xl border border-slate-200 bg-white/80 dark:border-slate-700 dark:bg-slate-900/80">
              <iframe
                class="h-64 w-full border-0 md:h-72 lg:h-96 xl:h-[28rem]"
                [src]="mapUrl"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
              ></iframe>
            </div>
          </div>
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Instrucciones</p>
            <div class="mt-4 grid gap-3 md:grid-cols-2">
              @if (alert.instrucciones.length === 0) {
                <span class="text-sm text-slate-400">Sin instrucciones</span>
              } @else {
                @for (step of alert.instrucciones; track $index) {
                  <div class="flex items-start gap-3 rounded-2xl bg-white px-4 py-3 text-sm text-slate-700 shadow-sm dark:bg-slate-900 dark:text-slate-200">
                    <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-slate-900 text-xs font-semibold text-white dark:bg-white dark:text-slate-900">
                      {{ $index + 1 }}
                    </span>
                    <p>{{ step }}</p>
                  </div>
                }
              }
            </div>
          </div>
          <div class="rounded-3xl bg-slate-50/80 p-6 text-slate-900 dark:bg-slate-800/80 dark:text-slate-100">
            <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Contactos</p>
            <div class="mt-4 grid gap-3 md:grid-cols-2">
              @if (alert.contactos.length === 0) {
                <span class="text-sm text-slate-400">Sin contactos</span>
              } @else {
                @for (person of alert.contactos; track $index) {
                  <div class="rounded-2xl bg-white px-4 py-3 text-sm text-slate-700 shadow-sm dark:bg-slate-900 dark:text-slate-200">
                    <p class="text-sm font-semibold">{{ person.nombre }}</p>
                    <p class="text-xs text-slate-500 dark:text-slate-400">{{ person.rol }}</p>
                    <p class="mt-2 text-xs font-semibold text-slate-600 dark:text-slate-300">
                      {{ person.telefono }}
                    </p>
                  </div>
                }
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
}
